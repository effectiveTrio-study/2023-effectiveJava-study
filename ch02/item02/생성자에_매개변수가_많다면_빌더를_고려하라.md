## ìƒì„±ìì— ì„ íƒì  ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ë•Œ
### 1. ì ì¸µì  ìƒì„±ì íŒ¨í„´(telescoping constructor pattern)
- `ì •ì˜`: ì„ íƒ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë¶€ ë‹¤ ë°›ëŠ” ìƒì„±ìê¹Œì§€ ëŠ˜ë ¤ê°€ëŠ” ë°©ì‹

```
public class NutritionFacts {
	private final int servingSize;  // (mL, 1íšŒ ì œê³µëŸ‰)     í•„ìˆ˜
	private final int servings;     // (íšŒ, ì´ níšŒ ì œê³µëŸ‰)  í•„ìˆ˜
	private final int calories;     // (1íšŒ ì œê³µëŸ‰ë‹¹)       ì„ íƒ
	private final int fat;          // (g/1íšŒ ì œê³µëŸ‰)       ì„ íƒ
	private final int sodium;       // (mg/1íšŒ ì œê³µëŸ‰)      ì„ íƒ
	private final int carbohydrate; // (g/1íšŒ ì œê³µëŸ‰)       ì„ íƒ

	public NutritionFacts(int servingSize, int servings) {
		this(servingSize, servings, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories) {
		this(servingSize, servings, calories, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories, int fat) {
		this(servingSize, servings, calories, fat, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium) {
		this(servingSize, servings, calories, fat, sodium, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium, int carbohydrate) {
		this.servingSize = servingSize;
		this.servings = servings;
		this.calories = calories;
		this.fat = fat;
		this.sodium = sodium;
		this.carbohydrate = carbohydrate;
	}
}
```
```
NutritionFacts cocaCola = new NutritionFacts(240, 8, 100, 0, 35, 27);
```

#### ë‹¨ì 
- ë§¤ê°œë³€ìˆ˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ì½ê¸° ì–´ë µë‹¤.
    - ë§¤ê°œë³€ìˆ˜ ìˆœì„œë¥¼ ë°”ê¿” ê±´ë„¤ì£¼ëŠ” ê²½ìš° ì»´íŒŒì¼ëŸ¬ëŠ” ì´ë¥¼ ì•Œì•„ì°¨ë¦¬ì§€ ëª»í•œë‹¤.

### 2. ìë°”ë¹ˆì¦ˆ(JavaBeans pattern)
- `ì •ì˜`: ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ìë¡œ ê°ì²´ë¥¼ ë§Œë“  í›„, ì„¸í„°(setter) ë©”ì„œë“œë“¤ì„ í˜¸ì¶œí•´ ì›í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ì„¤ì •í•˜ëŠ” ë°©ì‹
```
public class NutrutionFacts {
	private final int servingSize;  // (mL, 1íšŒ ì œê³µëŸ‰)     í•„ìˆ˜
	private final int servings;     // (íšŒ, ì´ níšŒ ì œê³µëŸ‰)  í•„ìˆ˜
	private final int calories;     // (1íšŒ ì œê³µëŸ‰ë‹¹)       ì„ íƒ
	private final int fat;          // (g/1íšŒ ì œê³µëŸ‰)       ì„ íƒ
	private final int sodium;       // (mg/1íšŒ ì œê³µëŸ‰)      ì„ íƒ
	private final int carbohydrate; // (g/1íšŒ ì œê³µëŸ‰)       ì„ íƒ

	public NutrutionFacts(int servingSize, int servings) {
		this(servingSize, servings, 0);
	}

	public NutrutionFacts(int servingSize, int servings, int calories) {
		this(servingSize, servings, calories, 0);
	}

	public NutrutionFacts(int servingSize, int servings, int calories, int fat) {
		this(servingSize, servings, calories, fat, 0);
	}

	public NutrutionFacts(int servingSize, int servings, int calories, int fat, int sodium) {
		this(servingSize, servings, calories, fat, sodium, 0);
	}

	public NutrutionFacts(int servingSize, int servings, int calories, int fat, int sodium, int carbohydrate) {
		this.servingSize = servingSize;
		this.servings = servings;
		this.calories = calories;
		this.fat = fat;
		this.sodium = sodium;
		this.carbohydrate = carbohydrate;
	}
}
```
ì ì¸µì  ìƒì„±ì íŒ¨í„´ì˜ ë‹¨ì ë“¤ì´ ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì—ì„œëŠ” ë” ì´ìƒ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ì½”ë“œê°€ ê¸¸ì–´ì§€ê¸´ í–ˆì§€ë§Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì‰¬ì›Œ ë” ì½ê¸° ì‰¬ìš´ ì½”ë“œê°€ ë˜ì—ˆë‹¤.
```
NutritionFacts cocaCola = new NutritionFacts();
cocaCola.setServingSize(240);
cocaCola.setServings(8);
cocaCola.setCalories(100);
cocaCola.setSodium(35);
cocaCola.setCarbohydrate(27);
```

#### ë‹¨ì 
- ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“¤ë ¤ë©´ ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ê°œ í˜¸ì¶œí•´ì•¼ í•˜ê³ , ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¼ê´€ì„±(consistency)ì´ ë¬´ë„ˆì§„ ìƒíƒœì— ë†“ì´ê²Œ ëœë‹¤.
    - `ì¼ê´€ì„±(consistency)`: ê°ì²´ì˜ ì¼ë¶€ ì†ì„±ì€ ì„¤ì •ë˜ê³  ì¼ë¶€ëŠ” ì„¤ì •ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ë‚¨ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸
- í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.
    - `ë¶ˆë³€ ê°ì²´`: ê°ì²´ê°€ ìƒì„±ëœ ì´í›„ ë‚´ë¶€ ìƒíƒœê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê°ì²´
        - but, ìë°”ë¹ˆì¦ˆì—ì„œëŠ” ê°ì²´ ì†ì„±ì´ ì–¸ì œë“  ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤.

ìœ„ì˜ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´, `freezing`ì´ë¼ëŠ” ê¸°ìˆ ì„ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.
```
private boolean frozen = false;

public void setServingSize(int servingSize) {
  checkIfObjectIsFrozen();
  this.servingSize = servingSize;
}

private void freeze() {
  this.frozen = true;
}

private void checkIfObjectIsFrozen() {
  if (this.frozen) {
    throw new IllegalStateException("Object is frozen");
  }
}
```
í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì€ ì½”ë“œëŠ” ì‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•œë‹¤.

### 3. ë¹Œë” íŒ¨í„´(Builder pattern)
- `ì •ì˜`: í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ë§Œìœ¼ë¡œ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ ë¹Œë” ê°ì²´ë¥¼ ì–»ê³  ë¹Œë” ê°ì²´ê°€ ì œê³µí•˜ëŠ” ì¼ì¢…ì˜ ì„¸í„° ë©”ì„œë“œë“¤ë¡œ ì›í•˜ëŠ” ì„ íƒ ë§¤ê°œë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ì—¬ build ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ í•„ìš” ê°ì²´ë¥¼ ì–»ëŠ” ë°©ì‹

```
public class NutritionFacts {
	private int servingSize;  // (mL, 1íšŒ ì œê³µëŸ‰)     í•„ìˆ˜
	private int servings;     // (íšŒ, ì´ níšŒ ì œê³µëŸ‰)  í•„ìˆ˜
	private int calories;     // (1íšŒ ì œê³µëŸ‰ë‹¹)       ì„ íƒ
	private int fat;          // (g/1íšŒ ì œê³µëŸ‰)       ì„ íƒ
	private int sodium;       // (mg/1íšŒ ì œê³µëŸ‰)      ì„ íƒ
	private int carbohydrate; // (g/1íšŒ ì œê³µëŸ‰)       ì„ íƒ

	private NutritionFacts(Builder builder) {
		servingSize = builder.servingSize;
		servings = builder.servings;
		calories = builder.calories;
		fat = builder.fat;
		sodium = builder.sodium;
		carbohydrate = builder.carbohydrate;
	}

	public static class Builder {
		// í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
		private final int servingSize;
		private final int servings;

		// ì„ íƒ ë§¤ê°œë³€ìˆ˜ - ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
		private int calories = 0;
		private int fat = 0;
		private int sodium = 0;
		private int carbohydrate = 0;

		public Builder(int servingSize, int servings) {
			this.servingSize = servingSize;
			this.servings = servings;
		}

		public Builder calories(int val) {
			calories = val;
			return this;
		}

		public Builder fat(int val) {
			fat = val;
			return this;
		}

		public Builder sodium(int val) {
			sodium = val;
			return this;
		}

		public Builder carbohydrate(int val) {
			carbohydrate = val;
			return this;
		}

		public NutritionFacts build() {
			return new NutritionFacts(this);
		}
	}
}
```
ë¹Œë”ì˜ ì„¸í„° ë©”ì„œë“œë“¤ì€ ë¹Œë” ìì‹ ì„ ë°˜í™˜í•˜ê¸°ì— ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥í•˜ë‹¤.  
ì´ë¥¼ `í”Œë£¨ì–¸íŠ¸ API(fluent API)` í˜¹ì€ `ë©”ì„œë“œ ì—°ì‡„(method chaining)`ì´ë¼ê³  í•œë‹¤.  
```
NutritionFacts cocaCola = new NutritionFacts.Builder(240, 8)
				.calories(100).sodium(35).carbohydrate(27).build();
```  

**ë¹Œë” íŒ¨í„´ì€ ëª…ëª…ëœ ì„ íƒì  ë§¤ê°œë³€ìˆ˜(named optional parameters)ë¥¼ í‰ë‚´ë‚¸ ê²ƒì´ë‹¤.**   

<details>
    <summary><b>lombokì˜ @Builderì™€ì˜ ì°¨ì´ì </b></summary>
    <li>Lombokì˜ @BuilderëŠ” ìë™ ìƒì„±ëœ Builder í´ë˜ìŠ¤ì—ì„œ ëª¨ë“  ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ íƒì ìœ¼ë¡œ ë‹¤ë£¨ê¸° ë•Œë¬¸ì—, ê°œë°œìê°€ Builder í´ë˜ìŠ¤ ë‚´ì—ì„œ ì´ˆê¸°í™” ë…¼ë¦¬ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤. -> @AllArgsConstructor(access = AccessLevel.PRIVATE)ë¥¼ ì¶”ê°€í•˜ë©´ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•˜ëŠ” private ìƒì„±ìê°€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. ì´ë¡œì¨ Builder í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ í•„ë“œ ê°’ì„ ì´ˆê¸°í™”í•˜ê³  ë¶ˆí•„ìš”í•œ ì™¸ë¶€ì—ì„œì˜ ê°ì²´ ì§ì ‘ ìƒì„±ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.</li>
    <li>Lombokì˜ @Builderë¥¼ ì‚¬ìš©í•˜ë©´ ëŸ°íƒ€ì„ì— ì½”ë“œê°€ ìƒì„±ë˜ê¸° ë•Œë¬¸ì—, ì»´íŒŒì¼ ì´í›„ì— Builder í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ê±°ë‚˜ í™•ì¥í•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤. -> í•„ìˆ˜ ê°’ì„ ì§€ì •í•˜ë ¤ë©´ @Builder ì–´ë…¸í…Œì´ì…˜ ëŒ€ì‹ , ì§ì ‘ Builderë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.</li>
</details>

### ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì—ì„œì˜ ë¹Œë” íŒ¨í„´
- ì¶”ìƒ í´ë˜ìŠ¤ëŠ” ì¶”ìƒ ë¹Œë”, êµ¬ì²´ í´ë˜ìŠ¤ëŠ” êµ¬ì²´ ë¹Œë”ë¥¼ ê°–ê²Œ í•œë‹¤.

```
public abstract class Pizza {
	public enum Topping { HAM, MUSHROOM, ONION, PEPPER, SAUSAGE };
	final Set<Topping> toppings;

	abstract static class Builder<T extends Builder<T>> {
		EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class);

		public T addTopping(Topping topping) {
			toppings.add(Objects.requireNonNull(topping));
			return self();
		}

		abstract Pizza build();

		// í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ì´ ë©”ì„œë“œë¥¼ ì¬ì •ì˜(overriding)í•˜ì—¬
		// "this"ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•´ì•¼ í•œë‹¤. (ë©”ì„œë“œ ì²´ì´ë‹)
		protected abstract T self();
	}

	Pizza(Builder<?> builder) {
		toppings = builder.toppings.clone(); // ì•„ì´í…œ 50 ì°¸ì¡°
	}
}
```
> Builder<T extends Builder<T>>: Tê°€ Builder í´ë˜ìŠ¤ë‚˜ Builderì˜ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ í™•ì¥(ìƒì†)í•´ì•¼í•œë‹¤ëŠ” ì˜ë¯¸  
> Objects.requireNonNull(): Java7ì— ì¶”ê°€ëœ null ì²´í¬ ë©”ì„œë“œ  
> builder.toppings.clone(): topping ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ëŒ€ì‹  cloneì„ í•˜ë©´ builder ê°ì²´ì˜ toppingì´ ë³€ê²½ë˜ë”ë¼ë„ ìƒì„±ëœ Pizza ê°ì²´ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ (ë¶ˆë³€ì„±)

<details>
  <summary><b>EnumSetì€ ì™œ ì‚¬ìš©í• ê¹Œ?</b></summary>
  <li>EnumSetì€ enum ê°’ì„ ì €ì¥í•  ë•Œ, ë‹¤ë¥¸ Set êµ¬í˜„ì²´ë³´ë‹¤ ë¨¼ì € ê³ ë ¤ë˜ì–´ì•¼ í•œë‹¤</li>  

  ```
public static <E extends Enum<E>> EnumSet<E> noneOf(Class<E> elementType) {
  Enum<?>[] universe = getUniverse(elementType);
  if (universe == null)
    throw new ClassCastException(elementType + " not an enum");

  if (universe.length <= 64)
    return new RegularEnumSet<>(elementType, universe);
  else
    return new JumboEnumSet<>(elementType, universe);
}
```

RegularEnumSetì€ longì˜ bitë¥¼ ê¸°ì¤€ìœ¼ë¡œ long í•˜ë‚˜ë¡œ ì¶©ë¶„íˆ í‘œí˜„ê°€ëŠ¥í•œ ê²½ìš° ì‚¬ìš©ë©ë‹ˆë‹¤. JumboEnumSetì€ ê·¸ ì´ìƒì˜ ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ê° ë¹„íŠ¸ê°€ í˜„ì¬ ì—´ê±°í˜•ì—ì„œì˜ ìœ„ì¹˜ë¥¼ ë°˜ì˜í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ê°’ì´ ì¡´ì¬í•˜ëŠ” ì§€ ì•„ë‹Œì§€ íŒŒì•…í•˜ëŠ” ê²ƒì´ ë§¤ìš° ë¹ ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì£¼ì˜í•  ì ì€ ì €ì¥í•  ë°ì´í„°ì˜ ìˆ˜ê°€ ì•„ë‹Œ ì—´ê±°í˜•ì— ì •ì˜ëœ ìƒìˆ˜ì˜ ê°œìˆ˜ë§Œì„ ê³ ë ¤í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ ì´ êµ¬í˜„ ë•Œë¬¸ì— EnumSetì˜ ëª¨ë“  ë©”ì„œë“œëŠ” ì‚°ìˆ  ë¹„íŠ¸ ì—°ì‚°ì„ ì‚¬ìš©í•´ì„œ êµ¬í˜„ë©ë‹ˆë‹¤. ì´ëŠ” ê° ì„¸ë¶€ êµ¬í˜„ì²´ì— ê°€ë©´ ìì„¸í•˜ê²Œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì‚°ìˆ  ë¹„íŠ¸ ì—°ì‚°ì˜ ì—°ì‚° ì†ë„ëŠ” ë§¤ìš° ë¹ ë¥´ê¸° ë•Œë¬¸ì— ëª¨ë“  ì‘ì—…ë“¤ì´ ì¼ì •í•œ ì‹œê°„ ì•ˆì— ì‹¤í–‰ë©ë‹ˆë‹¤.

ì´ëŠ” HashSet ê°™ì€ ë‹¤ë¥¸ Set êµ¬í˜„ì²´ë³´ë‹¤ ë¹ ë¥´ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¬ë°”ë¥¸ ë°ì´í„°ë¥¼ ì°¾ê¸° ìœ„í•´ hashCodeë¥¼ ì°¾ì„ í•„ìš”ì¡°ì°¨ ì—†ìŠµë‹ˆë‹¤.

ë˜í•œ ë¹„íŠ¸ ì—°ì‚° ìì²´ì˜ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ì„œ êµ‰ì¥íˆ ì••ì¶•ì ì´ê³  íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì´ ë•Œë¬¸ì— ë©”ëª¨ë¦¬ë¥¼ ì ê²Œ ì°¨ì§€í•©ë‹ˆë‹¤. ì´ ë˜í•œ ì¥ì ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</details>

```
public class NyPizza extends Pizza {
	public enum Size { SMALL, MEDIUM, LARGE }
	private final Size size;
	
	public static class Builder extends Pizza.Builder<Builder> {
		private final Size size;
		
		public Builder(Size size) {
			this.size = Objects.requireNonNull(size);
		}
		
		@Override public NyPizza build() {
			return new NyPizza(this);
		}
		
		@Override protected Builder self() { return this; }
	}
	
	private NyPizza(Builder builder) {
		super(builder);
		size = builder.size;
	}
}

public class Calzone extends Pizza {
	private final boolean sauceInside;

	public static class Builder extends Pizza.Builder<Builder> {
		private boolean sauceInside = false; // ê¸°ë³¸ê°’

		public Builder sauceInside() {
			sauceInside = true;
			return this;
		}

		@Override
		public Calzone build() {
			return new Calzone(this);
		}

		@Override
		protected Builder self() {
			return this;
		}
	}

	private Calzone(Builder builder) {
		super(builder);
		sauceInside = builder.sauceInside;
	}
}
```

```
NyPizza pizza = new NyPizza.Builder(SMALL)
				.addTopping(SAUSAGE).addTopping(ONION).build();
Calzone calzone = new Calzone.Builder()
        .addTopping(HAM).sauceInside().build();
```
ë¹Œë”ë¥¼ ì‚¬ìš©í•˜ë©´ ê°€ë³€ì¸ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ ê°œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤. 

#### ë‹¨ì 
- ì„±ëŠ¥ì´ ë¯¼ê°í•œ ìƒí™©ì—ì„  ë¹Œë” ìƒì„± ë¹„ìš©ì´ ê³ ë ¤ë  ìˆ˜ ìˆë‹¤.
- ë§¤ê°œë³€ìˆ˜ê°€ 4ê°œ ì´ìƒì€ ë˜ì–´ì•¼ ê°’ì–´ì¹˜ë¥¼ í•œë‹¤.

<br>

--- 
### ğŸ“Œ Reference
- [ë°±ê¸°ì„ ë‹˜ ì˜¨ë¼ì¸ ìŠ¤í„°ë”” 11ì£¼ì°¨-Enum](https://velog.io/@dion/%EB%B0%B1%EA%B8%B0%EC%84%A0%EB%8B%98-%EC%98%A8%EB%9D%BC%EC%9D%B8-%EC%8A%A4%ED%84%B0%EB%94%94-11%EC%A3%BC%EC%B0%A8-Enum)
- [[Java] Objects.requireNonNull ì€ ì™œ ì‚¬ìš©í• ê¹Œ?](https://hudi.blog/java-requirenonnull/)